<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#8B4513">
  <title>Momay</title>

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link rel="preconnect" href="https://momaydocbn-production.up.railway.app">

  <!-- iOS Safari full screen fix -->
  <meta name="apple-mobile-web-app-title" content="Momay">
  <!-- ‡πÉ‡∏™‡πà CSS versioned ‡πÅ‡∏ó‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏¥‡∏° -->
  <link rel="stylesheet" href="style.css?v=2.13.6">
</head>

<body>
  
<!---->
<div id="Date_icon">
  <div class="marquee">
    <div id="weather">
      <span style="font-weight:bold; color:#000000; font-size:0.82em;">Collaborative Sensing Platform by Momay</span>
      <span id="weather-city" style="font-size:0.82em;"></span>
      <span id="Date" style="font-size:0.82em;"></span> |
      <span id="weather-temp" style="font-size:0.82em;"></span> |
      <span id="weather-icon" style="font-size:0.82em;"></span> |
    </div>
  </div>
</div>


   
</div>

<div class="Top_Container">
  <div class="ClientName_Container">
    <div class="ClientName">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏´‡∏≠‡∏™‡∏°‡∏∏‡∏î ‡∏°.‡∏ö‡∏π‡∏£‡∏û‡∏≤</div>
    <div class="Date_install">User Number : No.006</div>
    <div class="ClientNo">Contract Number : -</div>
    <div class="ClientNo">Date Installed : 11-02-25</div>
    <div class="ClientNo">Contract Expiry : -</div>
  </div>
  <div class="top-right-col">
    <div id="icons-frame">
      <div id="Calendar_icon">
        <img src="./images/calendar_icon.png" alt="Calendar">
      </div>
      <div id="Kwang_icon">
        <img src="./images/Kwang_icon.png" alt="Kwang">
      </div>
      <div id="Bell_icon">
        <img src="./images/Bell_icon.png" alt="Bell">
        <span id="bellBadge">0</span>
      </div>
    </div>
    <div class="ElectricalBill_Container">
      <div id="DailyBill"></div>
      <div class="unit"></div>
    </div>
  </div>
</div>
  <!--maincon1 -->
  <!-- Swipeable Page View wrapper -->
  <div class="page-view">
    <div class="page-track">
      <div class="page active">
        <div class="Main_Container">
  <div class="Containerglow"></div>
  <div class="room-selector-wrap">
    <div id="Total_Bar_Label" class="total-bar-label room-selectable">‡∏´‡πâ‡∏≠‡∏á101‡πÇ‡∏ñ‡∏á‡∏ä‡∏±‡πâ‡∏ô1 <span class="room-arrow">‚ñº</span>
      <div id="roomDropdown" class="room-dropdown" style="display:none;">
        <div class="room-option selected" data-room="‡∏´‡πâ‡∏≠‡∏á101‡πÇ‡∏ñ‡∏á‡∏ä‡∏±‡πâ‡∏ô1">‡∏´‡πâ‡∏≠‡∏á101‡πÇ‡∏ñ‡∏á‡∏ä‡∏±‡πâ‡∏ô1</div>
        <div class="room-option" data-room="‡∏´‡πâ‡∏≠‡∏á200">‡∏´‡πâ‡∏≠‡∏á200</div>
        <div class="room-option" data-room="‡∏´‡πâ‡∏≠‡∏á300">‡∏´‡πâ‡∏≠‡∏á300</div>
      </div>
    </div>
  </div>
  
  <div id="Main_Picinfo">
    <div id="Icons_group">
      
      <div id="RoomBooking_icon">
        <img src="./images/Booking _icon.png" alt="Room Booking">
      </div>
      
    </div>
  </div>

  <!-- Date Picker -->
  <div id="PickDate">
    <button id="prevDay" type="button">&lt;</button>
    <span id="currentDay"></span>
    <button id="nextDay" type="button">&gt;</button>
  </div>
  
  <!-- Chart in Main Container -->
  <div class="MainChart_Container">
    <div id="chartSpinner" class="chart-spinner">
      <div class="spinner-ring"></div>
      <span class="spinner-text">Loading...</span>
    </div>
    <canvas id="EnergyChart"></canvas>
  </div>

   <div id="info_icon">
    <img src="./images/info.png" alt="info">
  </div>
        </div>
      </div>
      <!-- page 2 -->
      <div class="page">
        <div class="Main_Container2">
          <div class="Containerglow"></div>
          <div id="Total_Bar_Label2" class="total-bar-label">-<br> electrical Usage</div>
          <div id="Total_Bar2">
            <canvas id="totalDonutCanvas2"></canvas>
            <div id="Total_Bar_Text2">0%</div>
          </div>

          <div id="Main_Picinfo">
            <div id="Icons_group">
              <div id="Calendar_icon">
                <img src="./images/calendar_icon.png" alt="Calendar">
              </div>
              <div id="Kwang_icon">
                <img src="./images/Kwang_icon.png" alt="Kwang">
              </div>
              <div id="Bell_icon">
                <img src="./images/Bell_icon.png" alt="Bell">
                <span id="bellBadge">0</span>
              </div>
            </div>
          </div>

          <div class="Meter2">
            <h1>100 A</h1>
            <h1>3 Phase</h1>
          </div>
        </div>
      </div>
    </div>
    <!-- pagination dots (room-based) -->
    <div class="page-dots room-dots" aria-hidden="true">
      <span class="dot active" data-room="‡∏´‡πâ‡∏≠‡∏á101‡πÇ‡∏ñ‡∏á‡∏ä‡∏±‡πâ‡∏ô1"></span>
      <span class="dot" data-room="‡∏´‡πâ‡∏≠‡∏á200"></span>
      <span class="dot" data-room="‡∏´‡πâ‡∏≠‡∏á300"></span>
    </div>
  </div>

<!-- Info Popup -->
<div id="maincon_info"> 
  <div id="Bar_info">
  <span id="Bar_number">3</span>
  <span id="Bar_text">The bar shows and lights up the percent of current amps used from the max amps.</span>
  <div id="Popup_info">
  <span id="Popup_number">4</span>
  <div class="line-horizontal"></div>
  <div class="line-horizontal2"></div>
  <div class="line-vertical"></div>
  <span id="Popup_text">Includes Menu, Calendar, Solar Panel, and Notifications.</span>
  </div>
   <div id="Amp_info">
    <span id="Amp_number">5</span>
  <span id="Amp_text">Display the maximum amps and the electrical system.</span>
   </div>
    <div id="Name_info">
    <span id="Name_number">1</span>
  <span id="Name_text">Basic information: Name, Time, Weather...</span>
   </div>
    <div id="Bill_info">
    <span id="Bill_number">2</span>
  <span id="Bill_text">Daily Usage & Cost</span>
  <span id="BillCal_text">Daily electricity cost = Daily usage √ó Rate (4.4 THB)</span>
   </div>
       <div id="Floor_info">
    <span id="Floor_number">6</span>
   <span id="Floor_text">Percentage of electricity usage per floor </span>
     <span id="Floor_text2">"Floor electricity usage (%) = Current amps √∑ Maximum amps"</span>

    <div id="Chart_info">
    <span id="Chart_number">7</span>
   <span id="Chart_text">Real-time graph</span>
</div>

</div>

</div>

</div>


<div id="notificationPopup">
  <div id="notificationItems"></div>
  <div style="text-align:center; margin-top:5px;">
  </div>
</div>

<!-- Room Booking Popup -->
<div id="roomBookingPopup" style="display:none;">
  <div class="roomBookingContent">
    <h3 id="roomBookingTitle">‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á: ‡∏´‡πâ‡∏≠‡∏á101‡πÇ‡∏ñ‡∏á‡∏ä‡∏±‡πâ‡∏ô1</h3>
    
    <!-- Date picker for schedule -->
    <div class="schedule-date-picker">
      <button id="schedulePrevDay" type="button">&lt;</button>
      <input type="date" id="bookingDate">
      <button id="scheduleNextDay" type="button">&gt;</button>
    </div>
    
    <!-- Booking Schedule Table -->
    <div class="booking-schedule">
      <div class="schedule-header">
        <span class="schedule-time-header">‡πÄ‡∏ß‡∏•‡∏≤</span>
        <span class="schedule-room-header" id="scheduleRoomName">‡∏´‡πâ‡∏≠‡∏á101‡πÇ‡∏ñ‡∏á‡∏ä‡∏±‡πâ‡∏ô1</span>
      </div>
      <div class="schedule-body" id="scheduleBody">
        <!-- Time slots will be generated by JS -->
      </div>
    </div>
    
    <div class="booking-form">
      <div class="form-row">
        <div class="form-group">
          <label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°:</label>
          <div class="custom-select" id="startTimeSelect">
            <div class="select-selected">09:00</div>
            <div class="select-items select-hide">
              <div data-value="00:00">00:00</div>
              <div data-value="00:30">00:30</div>
              <div data-value="01:00">01:00</div>
              <div data-value="01:30">01:30</div>
              <div data-value="02:00">02:00</div>
              <div data-value="02:30">02:30</div>
              <div data-value="03:00">03:00</div>
              <div data-value="03:30">03:30</div>
              <div data-value="04:00">04:00</div>
              <div data-value="04:30">04:30</div>
              <div data-value="05:00">05:00</div>
              <div data-value="05:30">05:30</div>
              <div data-value="06:00">06:00</div>
              <div data-value="06:30">06:30</div>
              <div data-value="07:00">07:00</div>
              <div data-value="07:30">07:30</div>
              <div data-value="08:00">08:00</div>
              <div data-value="08:30">08:30</div>
              <div data-value="09:00" class="same-as-selected">09:00</div>
              <div data-value="09:30">09:30</div>
              <div data-value="10:00">10:00</div>
              <div data-value="10:30">10:30</div>
              <div data-value="11:00">11:00</div>
              <div data-value="11:30">11:30</div>
              <div data-value="12:00">12:00</div>
              <div data-value="12:30">12:30</div>
              <div data-value="13:00">13:00</div>
              <div data-value="13:30">13:30</div>
              <div data-value="14:00">14:00</div>
              <div data-value="14:30">14:30</div>
              <div data-value="15:00">15:00</div>
              <div data-value="15:30">15:30</div>
              <div data-value="16:00">16:00</div>
              <div data-value="16:30">16:30</div>
              <div data-value="17:00">17:00</div>
              <div data-value="17:30">17:30</div>
              <div data-value="18:00">18:00</div>
              <div data-value="18:30">18:30</div>
              <div data-value="19:00">19:00</div>
              <div data-value="19:30">19:30</div>
              <div data-value="20:00">20:00</div>
              <div data-value="20:30">20:30</div>
              <div data-value="21:00">21:00</div>
              <div data-value="21:30">21:30</div>
              <div data-value="22:00">22:00</div>
              <div data-value="22:30">22:30</div>
              <div data-value="23:00">23:00</div>
              <div data-value="23:30">23:30</div>
            </div>
            <input type="hidden" id="bookingStartTime" value="09:00">
          </div>
        </div>
        <div class="form-group">
          <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î:</label>
          <div class="custom-select" id="endTimeSelect">
            <div class="select-selected">17:00</div>
            <div class="select-items select-hide">
              <div data-value="00:30">00:30</div>
              <div data-value="01:00">01:00</div>
              <div data-value="01:30">01:30</div>
              <div data-value="02:00">02:00</div>
              <div data-value="02:30">02:30</div>
              <div data-value="03:00">03:00</div>
              <div data-value="03:30">03:30</div>
              <div data-value="04:00">04:00</div>
              <div data-value="04:30">04:30</div>
              <div data-value="05:00">05:00</div>
              <div data-value="05:30">05:30</div>
              <div data-value="06:00">06:00</div>
              <div data-value="06:30">06:30</div>
              <div data-value="07:00">07:00</div>
              <div data-value="07:30">07:30</div>
              <div data-value="08:00">08:00</div>
              <div data-value="08:30">08:30</div>
              <div data-value="09:00">09:00</div>
              <div data-value="09:30">09:30</div>
              <div data-value="10:00">10:00</div>
              <div data-value="10:30">10:30</div>
              <div data-value="11:00">11:00</div>
              <div data-value="11:30">11:30</div>
              <div data-value="12:00">12:00</div>
              <div data-value="12:30">12:30</div>
              <div data-value="13:00">13:00</div>
              <div data-value="13:30">13:30</div>
              <div data-value="14:00">14:00</div>
              <div data-value="14:30">14:30</div>
              <div data-value="15:00">15:00</div>
              <div data-value="15:30">15:30</div>
              <div data-value="16:00">16:00</div>
              <div data-value="16:30">16:30</div>
              <div data-value="17:00" class="same-as-selected">17:00</div>
              <div data-value="17:30">17:30</div>
              <div data-value="18:00">18:00</div>
              <div data-value="18:30">18:30</div>
              <div data-value="19:00">19:00</div>
              <div data-value="19:30">19:30</div>
              <div data-value="20:00">20:00</div>
              <div data-value="20:30">20:30</div>
              <div data-value="21:00">21:00</div>
              <div data-value="21:30">21:30</div>
              <div data-value="22:00">22:00</div>
              <div data-value="22:30">22:30</div>
              <div data-value="23:00">23:00</div>
              <div data-value="23:30">23:30</div>
              <div data-value="24:00">24:00</div>
            </div>
            <input type="hidden" id="bookingEndTime" value="17:00">
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á:</label>
          <input type="text" id="bookerName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á">
        </div>
        <div class="form-group">
          <label>‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:</label>
          <input type="text" id="bookingPurpose" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå">
        </div>
      </div>
    </div>
    <div class="booking-actions">
      <button id="confirmBooking" class="booking-btn confirm">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
      <button id="cancelBooking" class="booking-btn cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
  </div>
</div>

<!-- QR Code Popup -->
<div id="qrCodePopup" style="display:none;">
  <div class="qrCodeContent">
    <h3>‚úÖ ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
    <p id="qrBookingInfo"></p>
    <div id="qrCodeContainer"></div>
    <p class="qr-instruction">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á</p>
    <button id="closeQrPopup" class="booking-btn confirm">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<div class="Floor_Container">
  <div class="floor-icons-group">
    <div class="bulb-status" id="bulbStatus">
      <svg id="bulbIcon" class="bulb-icon off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" width="52" height="52">
        <ellipse cx="32" cy="20" rx="14" ry="16" fill="#e0d8c0" stroke="#74640a" stroke-width="2" class="bulb-glass"/>
        <rect x="27" y="34" width="10" height="8" rx="2" fill="#b5a76c" stroke="#74640a" stroke-width="1.5"/>
        <line x1="27" y1="37" x2="37" y2="37" stroke="#74640a" stroke-width="1"/>
        <line x1="27" y1="40" x2="37" y2="40" stroke="#74640a" stroke-width="1"/>
        <rect x="29" y="42" width="6" height="3" rx="1.5" fill="#74640a"/>
      </svg>
    </div>
    <div class="ac-status" id="acStatus">
      <svg id="acIcon" class="ac-icon off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 52" width="52" height="52">
        <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏≠‡∏£‡πå -->
        <rect x="4" y="4" width="56" height="26" rx="4" fill="#e0d8c0" stroke="#74640a" stroke-width="2" class="ac-body"/>
        <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏•‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ -->
        <line x1="10" y1="20" x2="54" y2="20" stroke="#74640a" stroke-width="1.5"/>
        <line x1="10" y1="24" x2="54" y2="24" stroke="#74640a" stroke-width="1"/>
        <!-- ‡πÑ‡∏ü LED -->
        <circle cx="13" cy="12" r="2.5" fill="#999" class="ac-led"/>
        <!-- ‡∏™‡∏≤‡∏¢‡∏•‡∏°‡πÄ‡∏¢‡πá‡∏ô -->
        <path d="M18 34 Q21 40 18 46" stroke="#74640a" stroke-width="1.5" fill="none" class="ac-wind" opacity="0"/>
        <path d="M32 34 Q35 40 32 46" stroke="#74640a" stroke-width="1.5" fill="none" class="ac-wind" opacity="0"/>
        <path d="M46 34 Q49 40 46 46" stroke="#74640a" stroke-width="1.5" fill="none" class="ac-wind" opacity="0"/>
      </svg>
    </div>
  </div>
  <div class="Realtime_kW" id="realtimeCountdown">--:--:--</div>
</div>


<!-- Overlay ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß -->
<div id="overlay"></div>

<!-- Kwang Popup -->
<div id="kwangPopup" style="display:none;">
  <div class="kwangPopupContent">
    <div id="kwangDatePickerUI">
      <button id="kwangPrevDay">&lt;</button>
      <span id="kwangCurrentDay">01 - January - 2025</span>
      <button id="kwangNextDay">&gt;</button>
    </div>

    <div class="kwangcircle-wrapper">
      <div class="kwangcircle-container">
        <img src="./images/home-icon.png" alt="home-icon" width="15" height="15" class="home-icon">
        <div id="kwangPowerContainer" class="daily-info"><span id="kwangPower">- Unit</span></div>
      </div>
      <div class="kwangcircle-container">
      <img src="./images/solar-cell-icon.png" alt="solar-cell-icon" width="15" height="15" class="solar-cell-icon">
        <div id="kwangCapacityContainer" class="daily-info"><span id="kwangCapacity">- kW</span></div>
      </div>
    </div>

    <div class="popupValue1">Daily Savings: <span id="kwangBill">- THB</span></div>
    <div class="popupValue2">Monthly Savings: <span id="kwangMonth">- THB</span></div>

    <img src="./images/Kwang_baner.png" alt="Kwang_baner" width="64" height="113" class="Kwang_baner">
  <img id="generateReport" src="./images/share.png" alt="Generate Report" 
     style="width:30px; height:30px; cursor:pointer; padding-top:10px;">
  </div>
</div>

<!-- overlay -->
<div id="overlay"></div>

<!-- popup -->
<div id="dailyPopup">

  <div class="daily-dates-arc">
    <div class="daily-date-arc" id="dayBeforeDate"></div>
    <div class="daily-date-arc" id="yesterdayDate"></div>
  </div>

  <!-- ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <div class="circle-container">
    <div id="dailyDayBefore" class="daily-info"></div>
    <div id="dailyYesterday" class="daily-info"></div>
  </div>

  <div id="dailyDiffValue"></div>
<!--
  <div class="popup-actions">
    <button id="downloadBtn">Download Image</button>
    <button id="shareBtn">Share</button>
  </div>
-->
  <img src="./images/Kwang_baner.png" alt="Kwang_baner" width="64" height="113" class="Kwang_baner">
</div>


<div class="Realtime_Container">
  <!-- Daily Bill Comparison: Today vs Yesterday -->
  <div class="bill-compare-section">
    <div class="bill-compare-row">
      <div class="bill-compare-card">
        <div class="bill-compare-date" id="billYesterdayDate">--</div>
        <div class="bill-compare-circle">
          <div class="bill-compare-data" id="billYesterdayData">-- Unit<br>-- THB.</div>
        </div>
      </div>
      <div class="bill-compare-card">
        <div class="bill-compare-date" id="billTodayDate">--</div>
        <div class="bill-compare-circle">
          <div class="bill-compare-data" id="billTodayData">-- Unit<br>-- THB.</div>
        </div>
      </div>
    </div>
    <div class="bill-compare-diff-wrap">
      <div class="bill-compare-diff" id="billDiffValue">Daily Bill Change: --</div>
    </div>
  </div>

  <hr class="energy-divider">

  <!-- Energy Day/Night Chart -->
  <div class="energy-chart-header">
    <button class="energy-chart-nav" id="energyChartPrev" type="button">&lt;</button>
    <span class="energy-chart-title" id="energyChartTitle">7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
    <button class="energy-chart-nav" id="energyChartNext" type="button">&gt;</button>
  </div>
  <div style="position:relative;">
    <div id="energyChartSpinner" class="chart-spinner">
      <div class="spinner-ring"></div>
      <span class="spinner-text">Loading...</span>
    </div>
    <canvas id="energyDayNightChart"></canvas>
  </div>
  <div class="energy-chart-legend">
    <span class="legend-item"><span class="legend-color" style="background:#f5a623;"></span>Day (THB)</span>
    <span class="legend-item"><span class="legend-color" style="background:#4a6fa5;"></span>Night (THB)</span>
  </div>
</div>

<div class="Bottom_info">
<div class="Version">V.11225</div>
</div>

<div id="calendarPopup">
  <div id="calendar"></div>
</div>

<!-- Report Action Modal -->
<div id="reportActionModal" class="report-modal">
  <div class="report-modal-content">
    <div class="modal-header">
      <h3>Export Report</h3>
    </div>
    <div class="modal-body">
      <p class="modal-description">Choose how you want to export your report</p>
      <div class="action-buttons">
        <button id="downloadReportBtn" class="report-action-btn download-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          <div class="btn-content">
            <span class="btn-title">Download</span>
            <span class="btn-subtitle">Save to device</span>
          </div>
        </button>
        <button id="shareReportBtn" class="report-action-btn share-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
          <div class="btn-content">
            <span class="btn-title">Share</span>
            <span class="btn-subtitle">Send to others</span>
          </div>
        </button>
      </div>
    </div>
    <div class="modal-footer">
      <button id="cancelReportBtn" class="report-cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<!-- Report Wrapper -->
<div id="reportWrapper">
<img src="./images/kwang_logo_report.png" 
     alt="Kwangreport" 
     style="width:100%; max-width:213px; height:auto; display:block; margin-left:-20px;">
     <p>Client Name: <span>Naresuan University Library</span></p>
  <p>Date: <span id="kwangDateReport"></span></p>
  <p>Electricity usage (within 1 day) :  <strong><span id="kwangTOTEL"></span></strong></p>
<p class="padded-bottom">
  Electricity Bill (within 1 day) : <strong><span id="kwangTOTBill"></span></strong>
</p>
<div class="info-container">
  <div class="info-box1">
    <p>Electricity usage (06:00AM‚Äì18:00PM):  <strong><span id="kwangPowerReport">-</span></strong></p>
    <p>Recommended Solar Cell Installation:  <strong><span id="kwangCapacityReport">-</span></strong></p>
    <p>Daily savings:  <strong><span id="kwangBillReport">-</span></strong></p>
    <p>Monthly savings:  <strong><span id="kwangMonthReport">-</span></strong></p>
  </div>
  <div class="info-box2">
    <p>Electricity usage (18:00PM‚Äì6:00AM):  <strong><span id="kwangnight">-</span></strong></p>
  </div>
</div>
   <div style="margin-top:20px;">
    <canvas id="EnergyChartReport" width="600" height="300"></canvas>
  </div>
  <table id="kwangHourlyTable">
    <thead>
      <tr>
        <th>Hour</th>
        <th>Energy (Unit)</th>
      </tr>
    </thead>
    <tbody>
      <tr><td colspan="2">No data</td></tr>
    </tbody>
  </table>
</div>


  
<!--
<div id="DatePopup" class="popup">
  <div id="popupContent">
    <span class="popup-date"></span>
    <div id="popup-bill"></div>
    <div id="popup-unit"></div>
    <button id="downloadPopup">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</button>
  </div>
</div>
-->
<script>
// Register service worker with correct path for any subfolder
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    // Use relative path so it works from subfolders (e.g. /Momay02/)
    var swPath = (window.location.pathname.endsWith('/') ? '' : '../') + 'sw.js';
    // But if at root, use '/sw.js'
    if (window.location.pathname === '/' || window.location.pathname === '/index.html') swPath = '/sw.js';

    navigator.serviceWorker.register(swPath, { updateViaCache: 'none' })
      .then(function(reg) {
        console.log('ServiceWorker registered', reg);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö SW ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
        reg.addEventListener('updatefound', function() {
          var newWorker = reg.installing;
          console.log('üîÑ SW update found ‚Äî installing‚Ä¶');
          newWorker.addEventListener('statechange', function() {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              // ‡∏°‡∏µ SW ‡∏ï‡∏±‡∏ß‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏ö‡∏≠‡∏Å SW ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ skipWaiting
              console.log('‚è© New SW installed ‚Äî sending SKIP_WAITING');
              newWorker.postMessage({ type: 'SKIP_WAITING' });
            }
          });
        });
      })
      .catch(function(err) { console.error('SW register failed', err); });

    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠ SW ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡πâ‡∏ß ‚Üí reload ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    var refreshing = false;
    navigator.serviceWorker.addEventListener('controllerchange', function() {
      if (refreshing) return;
      refreshing = true;
      console.log('‚ôªÔ∏è New SW active ‚Äî reloading page for latest version');
      window.location.reload();
    });
  });
}
</script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
<script src="pageview.js" defer></script>
<script src="script.js?v=2.13.6" defer></script>



</body>
</html>